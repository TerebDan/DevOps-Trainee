---
- name: Install nginx
  yum:
      name: nginx
      state: latest
      update_cache: true

- name: permit traffic in default zone for http service
  ansible.posix.firewalld:
    service: http
    permanent: yes
    state: enabled

- name: reload service firewalld
  systemd:
    name: firewalld
    state: reloaded

- name: Disable SELinux
  ansible.posix.selinux:
    state: disabled      

- name: generate nginx.conf file
  ansible.builtin.template:
      src: nginx.conf.j2
      dest: /etc/nginx/nginx.conf
  notify: restart nginx
  
- name: Start nginx
  service: name=nginx state=started enabled=yes
